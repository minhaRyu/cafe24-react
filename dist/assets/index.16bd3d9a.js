import{j as jsxRuntime,r as react,R as Routes,a as Route,L as Link,O as Outlet,u as useNavigate,b as useLocation,N as Navigate,c as client,d as React,B as BrowserRouter}from"./vendor.1363a559.js";const p=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}};p();var index="";const fakeAuthProvider={isAuthenticated:!1,signin(e){fakeAuthProvider.isAuthenticated=!0,setTimeout(e,100)},signout(e){fakeAuthProvider.isAuthenticated=!1,setTimeout(e,100)}},jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs;function App(){return jsxs(AuthProvider,{children:[jsx("h1",{children:"Auth Example"}),jsx("p",{children:"This example demonstrates a simple login flow with three pages: a public page, a protected page, and a login page. In order to see the protected page, you must first login. Pretty standard stuff."}),jsx("p",{children:"First, visit the public page. Then, visit the protected page. You're not yet logged in, so you are redirected to the login page. After you login, you are redirected back to the protected page."}),jsx("p",{children:"Notice the URL change each time. If you click the back button at this point, would you expect to go back to the login page? No! You're already logged in. Try it out, and you'll see you go back to the page you visited just *before* logging in, the public page."}),jsx(Routes,{children:jsxs(Route,{element:jsx(Layout,{}),children:[jsx(Route,{path:"/",element:jsx(PublicPage,{})}),jsx(Route,{path:"/login",element:jsx(LoginPage,{})}),jsx(Route,{path:"/protected",element:jsx(RequireAuth,{children:jsx(ProtectedPage,{})})}),jsx(Route,{path:"/testfolder",element:jsx(TestFolerPage,{})})]})})]})}function Layout(){return jsxs("div",{children:[jsx(AuthStatus,{}),jsxs("ul",{children:[jsx("li",{children:jsx(Link,{to:"/",children:"\uC774\uAC70 \uBABB\uC4F8\uB4EF... \uB77C\uC6B0\uD130 \uB9C1\uD06C \uC0AC\uC6A9 Public Page"})}),jsx("li",{children:jsx(Link,{to:"/protected",children:"\uC774\uAC70 \uBABB\uC4F8\uB4EF... \uB77C\uC6B0\uD130 \uB9C1\uD06C \uC0AC\uC6A9 Protected Page"})}),jsx("li",{children:jsx(Link,{to:"/testfolder",children:"\uC774\uAC70 \uBABB\uC4F8\uB4EF... \uB77C\uC6B0\uD130 \uB9C1\uD06C \uC0AC\uC6A9 testfolder Page"})}),jsx("li",{children:jsx("a",{href:"/",children:"\uB77C\uC6B0\uD130 \uB9C1\uD06C \uBBF8\uC0AC\uC6A9 Public Page"})}),jsx("li",{children:jsx("a",{href:"/protected",children:"\uB77C\uC6B0\uD130 \uB9C1\uD06C \uBBF8\uC0AC\uC6A9 Protected Page"})}),jsx("li",{children:jsx("a",{href:"/testfolder",children:"\uB77C\uC6B0\uD130 \uB9C1\uD06C \uBBF8\uC0AC\uC6A9 testfolder Page"})})]}),jsx(Outlet,{})]})}let AuthContext=react.exports.createContext(null);function AuthProvider({children:e}){let[u,o]=react.exports.useState(null),r={user:u,signin:(i,s)=>fakeAuthProvider.signin(()=>{o(i),s()}),signout:i=>fakeAuthProvider.signout(()=>{o(null),i()})};return jsx(AuthContext.Provider,{value:r,children:e})}function useAuth(){return react.exports.useContext(AuthContext)}function AuthStatus(){let e=useAuth(),u=useNavigate();return e.user?jsxs("p",{children:["Welcome ",e.user,"!"," ",jsx("button",{onClick:()=>{e.signout(()=>u("/"))},children:"Sign out"})]}):jsx("p",{children:"You are not logged in."})}function RequireAuth({children:e}){let u=useAuth(),o=useLocation();return u.user?e:jsx(Navigate,{to:"/login",state:{from:o},replace:!0})}function LoginPage(){var o,n;useNavigate();let e=useLocation();useAuth();let u=((n=(o=e.state)==null?void 0:o.from)==null?void 0:n.pathname)||"/";return jsx("div",{children:jsxs("p",{children:["You must log in to view the page at ",u]})})}function PublicPage(){return jsx("h3",{children:"Public"})}function ProtectedPage(){return jsx("h3",{children:"Protected"})}function TestFolerPage(){var e,u,o;return jsxs("div",{children:[jsx("h3",{children:"testfolder"}),jsx("label",{title:(e=window.testState)==null?void 0:e.login_id_type_text,dangerouslySetInnerHTML:{__html:(u=window.testState)==null?void 0:u["form.member_id"]}}),jsx("label",{title:"\uBE44\uBC00\uBC88\uD638",dangerouslySetInnerHTML:{__html:(o=window.testState)==null?void 0:o["form.member_passwd"]}}),jsx("a",{href:"#none",onClick:()=>{var n;return eval(`(function(){${(n=window.testState)==null?void 0:n.$action_func_login}})();`)},children:"\uB85C\uADF8\uC778"})]})}client.createRoot(document.getElementById("root")).render(jsx(React.StrictMode,{children:jsx(BrowserRouter,{children:jsx(App,{})})}));
